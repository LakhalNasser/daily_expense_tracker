# دليل مهام تطوير تطبيق Product Expense Tracker

هذا الملف يمثل المرجع العملي والتنظيمي لفريق تطوير تطبيق Flutter لتتبع المصاريف اليومية. يحتوي على شجرة الواجهات، خطوات العمل، وجداول تفصيلية لكل شاشة ومكون رئيسي، مع توضيح التقنيات والمكتبات المستخدمة، لتسهيل المتابعة والتوزيع بين أعضاء الفريق.

---

# شجرة واجهات التطبيق (App Screens Tree)

```
MainScreen (الرئيسية)
│
├── AddProductScreen (إضافة منتج)
│
├── ProductListScreen (قائمة المنتجات)
│   ├── EditProductScreen (تعديل منتج)
│   └── ProductDetailsScreen (تفاصيل المنتج) [اختياري]
│
├── StatisticsScreen (الإحصائيات)
│
└── SettingsScreen (الإعدادات)
```

- **MainScreen**: نقطة الدخول الرئيسية للتطبيق، منها يتم التنقل إلى باقي الواجهات.
- **AddProductScreen**: لإضافة منتج جديد، يمكن الوصول إليها من MainScreen أو من ProductListScreen.
- **ProductListScreen**: لعرض جميع المنتجات، منها يمكن تعديل أو حذف منتج أو عرض تفاصيله.
- **EditProductScreen**: لتعديل منتج موجود (تفتح من ProductListScreen).
- **ProductDetailsScreen**: لعرض تفاصيل منتج (اختياري، يمكن دمجها مع EditProductScreen).
- **StatisticsScreen**: لعرض الرسوم البيانية والإحصائيات.
- **SettingsScreen**: لضبط إعدادات التطبيق.

> هذه الشجرة توضح العلاقات والتنقلات الأساسية بين الواجهات، وتساعد في فهم الترابط البنيوي للتطبيق.

---

# خطوات العمل

1. دراسة المشروع بشكل مفصل.
2. سؤال الذكاء الصناعي التوليدي (نسخة مدفوعة) عند الحاجة.
3. تدوين قائمة عامة للمشروع مع وصف شامل.
4. وضع رؤية مستقبلية للبرنامج.
5. وضع قائمة مرجعية لكل واجهة.
6. وضع قائمة مهام منظمة حسب كل واجهة ولكل عنصر مفصل بدقة.
7. وضع برانش (فرع git) لكل مهمة وإنشاؤه.
8. إنشاء ريبو جديد للمشروع ورفع المشروع الأولي.
9. البدء بالمهام بالترتيب:
   a. البدء بالمهمة الجديدة إذا تم الانتهاء من التحقق من آخر مهمة (إلا إذا كانت أول رفع)
   b. إنشاء البرانش
   c. العمل على المهمة بشكل محترف في المشروع الحالي
   d. التحقق من صحة العمل
   e. رفع إلى البرانش مع وصف مناسب
   f. الانتقال إلى المهمة الجديدة إذا اكتملت المهمة بنجاح وسؤال للاستئناف
10. متابعة بنفس المنهج رقم 9 حتى نهاية جميع المهام
11. تجريب المهام

---

# جداول المهام التفصيلية

> ✅ = حالة التنفيذ | 🔍 = التحقق | 🛠️ = التصحيح | ⚙️ = ملاحظات تقنية | 🔀 = اسم الفرع البرمجي

## 📄 MainScreen (الرئيسية)

| ✅  | اسم المهمة          | وصف المهمة                                        | وقت التعديل         | 🔍 | 🛠️ | ⚙️                                                               | 🔀                    |
| -- | ------------------ | ------------------------------------------------- | ------------------- | -- | --- | ---------------------------------------------------------------- | --------------------- |
| ✅ | هيكل التطبيق       | إعداد BottomNavigationBar للتنقل بين الشاشات      | 2025-07-05 10:42    | ✅ | ✅  | `BottomNavigationBar` + `PageView` أو `IndexedStack`             | `feature/main-screen` |
| ✅ | شريط التطبيق       | AppBar مع عنوان متغير حسب الصفحة الحالية          | 2025-07-05 10:45    | ✅ | ✅  | `AppBar` مع `title` ديناميكي                                     | `feature/main-screen` |
| ✅ | زر الإضافة السريع   | FAB لإضافة منتج جديد مباشرة                       | 2025-07-05 10:48    | ✅ | ✅  | `FloatingActionButton` مع انتقال إلى AddProductScreen            | `feature/main-screen` |
| ⬜️ | إدارة حالة التنقل  | حفظ الصفحة الحالية واستعادتها                     | -                   | ⬜️ | ⬜️  | `provider` أو `bloc` لإدارة الحالة                              | `feature/main-screen` |
| ⬜️ | تحسين الأداء       | تحميل الشاشات بشكل كسول (lazy loading)            | -                   | ⬜️ | ⬜️  | `IndexedStack` أو التحميل عند الطلب                              | `feature/main-screen` |
| ⬜️ | انتقالات سلسة      | انتقالات متحركة بين الشاشات                       | -                   | ⬜️ | ⬜️  | `PageTransitionsBuilder` المناسب                                 | `feature/main-screen` |
| ⬜️ | تهيئة الخدمات      | تهيئة ProductService وباقي الخدمات عند بدء التطبيق | -                   | ⬜️ | ⬜️  | `initState` أو `didChangeDependencies`                           | `feature/main-screen` |

---

## 📄 AddProductScreen (إضافة منتج)

| ✅  | اسم المهمة      | وصف المهمة                                     | وقت التعديل         | 🔍 | 🛠️ | ⚙️                                                                | 🔀                       |
| -- | --------------- | ---------------------------------------------- | ------------------- | -- | --- | ----------------------------------------------------------------- | ------------------------ |
| ⬜️ | إنشاء الحقول    | حقل الاسم، المبلغ، التصنيف، التاريخ، الملاحظات | -                   | ⬜️ | ⬜️  | `TextFormField` + `DropdownButtonFormField` + `DatePicker`        | `feature/add-product-ui` |
| ⬜️ | اختيار الصورة   | رفع صورة من الكاميرا أو المعرض                 | -                   | ⬜️ | ⬜️  | مكتبة `image_picker`، تحتاج إذن الكاميرا                          | `feature/add-product-ui` |
| ⬜️ | التحقق من القيم | التحقق من الاسم والمبلغ والتصنيف               | -                   | ⬜️ | ⬜️  | `Form + GlobalKey<FormState>`                                     | `feature/add-product-ui` |
| ⬜️ | حفظ المنتج      | إنشاء كائن JSON وحفظه في الملف                 | -                   | ⬜️ | ⬜️  | `jsonEncode()` + `File.writeAsString()`                           | `feature/json-storage`   |
| ⬜️ | عرض رسالة       | Snackbar أو Alert بعد الحفظ                    | -                   | ⬜️ | ⬜️  | `ScaffoldMessenger`                                               | `feature/add-product-ui` |

---

## 📄 EditProductScreen (تعديل منتج)

| ✅  | اسم المهمة         | وصف المهمة                                 | وقت التعديل         | 🔍 | 🛠️ | ⚙️                                                    | 🔀                        |
| -- | ------------------ | ------------------------------------------ | ------------------- | -- | --- | ----------------------------------------------------- | ------------------------- |
| ⬜️ | تحميل بيانات المنتج | جلب بيانات المنتج من JSON وعرضها للتحرير   | -                   | ⬜️ | ⬜️  | `FutureBuilder` + `TextEditingController`             | `feature/product-list-ui` |
| ⬜️ | تعديل الحقول       | تعديل الاسم، المبلغ، التصنيف، الملاحظات    | -                   | ⬜️ | ⬜️  | نفس مكونات AddProductScreen                           | `feature/product-list-ui` |
| ⬜️ | تحديث الصورة       | تغيير أو حذف صورة المنتج                   | -                   | ⬜️ | ⬜️  | `image_picker` + حذف الصورة القديمة                   | `feature/product-list-ui` |
| ⬜️ | حفظ التعديلات      | تحديث JSON وتخزين الصورة الجديدة           | -                   | ⬜️ | ⬜️  | `jsonEncode()` + `File.writeAsString()`               | `feature/json-storage`    |
| ⬜️ | عرض رسالة          | Snackbar أو Alert بعد التعديل              | -                   | ⬜️ | ⬜️  | `ScaffoldMessenger`                                   | `feature/product-list-ui` |

---

## 📄 ProductDetailsScreen (تفاصيل المنتج) [اختياري]

| ✅  | اسم المهمة      | وصف المهمة                        | وقت التعديل | 🔍 | 🛠️ | ⚙️                                 | 🔀                        |
| -- | --------------- | --------------------------------- | ----------- | -- | --- | ---------------------------------- | ------------------------- |
| ⬜️ | عرض التفاصيل    | عرض جميع بيانات المنتج وصورته      | -           | ⬜️ | ⬜️  | `ListTile` أو `Card`               | `feature/product-list-ui` |
| ⬜️ | زر تعديل        | زر للانتقال إلى EditProductScreen | -           | ⬜️ | ⬜️  | `Navigator.push`                   | `feature/product-list-ui` |
| ⬜️ | زر حذف          | حذف المنتج من القائمة              | -           | ⬜️ | ⬜️  | تأكيد قبل الحذف + حذف الصورة       | `feature/product-list-ui` |

---

## 📄 ProductListScreen (قائمة المنتجات)

| ✅  | اسم المهمة   | وصف المهمة                                | وقت التعديل         | 🔍 | 🛠️ | ⚙️                                          | 🔀                        |
| -- | ------------ | ----------------------------------------- | ------------------- | -- | --- | ------------------------------------------- | ------------------------- |
| ⬜️ | عرض المنتجات | قراءة من JSON وعرض القائمة                | -                   | ⬜️ | ⬜️  | `ListView.builder` مع `FutureBuilder`       | `feature/product-list-ui` |
| ⬜️ | بطاقة المنتج | بطاقة فيها الاسم، المبلغ، الصورة، التصنيف | -                   | ⬜️ | ⬜️  | تصميم باستخدام `Card` أو `ListTile`         | `feature/product-list-ui` |
| ⬜️ | الفلترة      | حسب التصنيف أو التاريخ                    | -                   | ⬜️ | ⬜️  | `Dropdown` + `where` على القائمة            | `feature/product-list-ui` |
| ⬜️ | تعديل وحذف   | أزرار لتعديل أو حذف المنتج                | -                   | ⬜️ | ⬜️  | احذر من التعامل مع الصور المرتبطة عند الحذف | `feature/product-list-ui` |

---

## 📄 StatisticsScreen (الإحصائيات)

| ✅  | اسم المهمة | وصف المهمة                     | وقت التعديل | 🔍 | 🛠️ | ⚙️                                | 🔀                      |
| -- | ---------- | ------------------------------ | ----------- | -- | --- | --------------------------------- | ----------------------- |
| ⬜️ | PieChart   | توزيع المصاريف حسب التصنيف     | -           | ⬜️ | ⬜️  | `charts_flutter` أو `fl_chart`    | `feature/statistics-ui` |
| ⬜️ | LineChart  | عرض تغير المصاريف زمنيًا       | -           | ⬜️ | ⬜️  | التعامل مع `DateTime.parse()` مهم | `feature/statistics-ui` |
| ⬜️ | ملخص       | مجموع شهري / يومي / أعلى تصنيف | -           | ⬜️ | ⬜️  | `fold`, `groupBy`, `sum()`        | `feature/statistics-ui` |

---

## 📄 SettingsScreen (الإعدادات)

| ✅  | اسم المهمة   | وصف المهمة              | وقت التعديل | 🔍 | 🛠️ | ⚙️                                         | 🔀                 |
| -- | ------------ | ----------------------- | ----------- | -- | --- | ------------------------------------------ | ------------------ |
| ⬜️ | العملة       | Dropdown لاختيار العملة | -           | ⬜️ | ⬜️  | `shared_preferences`                      | `feature/settings` |
| ⬜️ | الوضع الليلي | زر تبديل الوضع الداكن   | -           | ⬜️ | ⬜️  | `ThemeMode` مع `provider` أو `bloc`       | `feature/settings` |
| ⬜️ | مسح البيانات | حذف ملف JSON + الصور    | -           | ⬜️ | ⬜️  | `File.delete()` مع تأكيد مسبق             | `feature/settings` |

---

## 📄 التخزين: ProductService + JSON

| ✅  | اسم المهمة     | وصف المهمة                                    | وقت التعديل         | 🔍 | 🛠️ | ⚙️                                                        | 🔀                     |
| -- | -------------- | --------------------------------------------- | ------------------- | -- | --- | --------------------------------------------------------- | ---------------------- |
| ⬜️ | نموذج البيانات | إنشاء `ProductModel` مع `fromJson` و `toJson` | -                   | ⬜️ | ⬜️  | `json_serializable` أو يدويًا                              | `feature/json-storage` |
| ⬜️ | تحميل JSON     | تحميل المنتجات من `products.json`             | -                   | ⬜️ | ⬜️  | `File.readAsString()` و `jsonDecode`                       | `feature/json-storage` |
| ⬜️ | حفظ JSON       | تحديث الملف بعد أي تعديل                      | -                   | ⬜️ | ⬜️  | احذر من التزامن، استخدم `await`                           | `feature/json-storage` |
| ⬜️ | حفظ الصور      | نسخ الصور إلى مجلد محلي ثابت                  | -                   | ⬜️ | ⬜️  | `path_provider.getApplicationDocumentsDirectory()`          | `feature/json-storage` |

---

## 📄 تهيئة المشروع: Setup

| ✅  | اسم المهمة        | وصف المهمة                        | وقت التعديل | 🔍 | 🛠️ | ⚙️                                     | 🔀              |
| -- | ----------------- | --------------------------------- | ----------- | -- | --- | -------------------------------------- | --------------- |
| ⬜️ | إنشاء المشروع     | `flutter create` + تنظيم المجلدات | -           | ⬜️ | ⬜️  | لا تترك الملفات في `lib/` مباشرة       | `feature/setup` |
| ⬜️ | إضافة التبعيات    | إعداد `pubspec.yaml` بكل التبعيات | -           | ⬜️ | ⬜️  | راقب تعارض الإصدارات                   | `feature/setup` |
| ⬜️ | إعداد `main.dart` | مسارات التطبيق، الوضع الليلي      | -           | ⬜️ | ⬜️  | `MaterialApp.router` عند الحاجة         | `feature/setup` |

---

## 📄 التوثيق والاختبارات

| ✅  | اسم المهمة   | وصف المهمة                         | وقت التعديل | 🔍 | 🛠️ | ⚙️                                         | 🔀                   |
| -- | ------------ | ---------------------------------- | ----------- | -- | --- | ------------------------------------------ | -------------------- |
| ⬜️ | إعداد README | وصف الفكرة، الصور، تعليمات التشغيل | -           | ⬜️ | ⬜️  | ملف `README.md` في الجذر                   | `docs/update-readme` |
| ⬜️ | وثيقة PRD    | prd.md تشرح الهيكل والمتطلبات      | -           | ⬜️ | ⬜️  | أضفها إلى مجلد `docs/`                     | `docs/update-readme` |
| ⬜️ | checklist    | نسخة Markdown أو CSV من الجدول هذا | -           | ⬜️ | ⬜️  | استخدمه كـ issue tracker أو GitHub Project | `docs/update-readme` |

---

> **ملاحظة:**
> - يمكن توزيع المهام على أعضاء الفريق حسب التخصص (UI, منطق, تخزين, توثيق).
> - يفضل تحديث حالة الأعمدة (✅, 🔍, 🛠️) بشكل دوري.
> - يمكن إضافة أعمدة أو جداول فرعية حسب الحاجة أثناء التطوير.
